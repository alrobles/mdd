library(progress)
pb <- progress_bar$new(
    format = "  downloading foobar at :rate, got :bytes in :elapsed",
    clear = FALSE, total = 1e7, width = 60)
f <- function() {
  for (i in 1:100) {
    pb$tick(sample(1:100 * 1000, 1))
    Sys.sleep(2/100)
  }
  pb$tick(1e7)
  invisible()
}
f()
